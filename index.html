<html lang = "en">

<head>
    <meta charset = "UTF-8" />
    <title>Leaflet Timeline Slider</title>
    <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
    integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
    integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
    crossorigin=""></script>

    <script src="src/leaflet-timeline-slider.js"></script>
    
</head>
    <body>
        <div id="mapid" style="height: 600px;">
        </div>


        <script type="text/javascript">
            var eventPin = L.icon({
                                iconSize: [70,70],
                                //iconAnchor: [22,45],
                                //popupAnchor: [1, -24],
                                iconUrl: 'https://png.pngtree.com/element_our/png/20181208/bulb-icon-png_265063.jpg'
                                });

            var trainPin = L.icon({
                                iconSize: [35,35],
                                //iconAnchor: [22,45],
                                //popupAnchor: [1, -24],
                                iconUrl: 'https://sites.google.com/site/gougouyaolaiyaoqu/_/rsrc/1434247920871/jiao-tong-lu-xian-tu/tai-tie-lu-xian-tu/normal_004312e60c5465229b20d2a83c4d8a53.jpg?height=398&width=400'
                                });

            var minePin = L.icon({
                                iconSize: [35,35],
                                //iconAnchor: [22,45],
                                //popupAnchor: [1, -24],
                                iconUrl: 'data:image/png;base64,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'
                                });

            var normalPin = L.icon({
                                iconSize: [35,35],
                                //iconAnchor: [22,45],
                                //popupAnchor: [1, -24],
                                iconUrl: 'https://png.pngtree.com/png-vector/20190418/ourmid/pngtree-vector-location-icon-png-image_952043.jpg'
                                });                    

            data = {"type": "FeatureCollection",
                        "features": [
                            //平溪煤礦開始
                            {
                                "type": "Feature",
                                "properties": {
                                    "title": ["1918", "1920"],
                                    "content": "<h2>平溪煤礦 (石底三坑)<br> <h2> 1918年：日本人浦田彥次郎開浦田坑,屬臺陽在平溪最早的礦場。",
                                    "icon": minePin
                                },
                                "geometry": {
                                    "type": "Point",
                                    "coordinates": [
                                    121.72755,
                                    25.03858
                                        
                                    ]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": {
                                    "title": ["1921", "1921"],
                                    "content": `<h2>平溪煤礦 (石底三坑)<br> <h2> 1918年：日本人浦田彥次郎開浦田坑,屬臺陽在平溪最早的礦場。<br> 
                                                1921年：新增事件。`,
                                    "icon": eventPin
                                },
                                "geometry": {
                                    "type": "Point",
                                    "coordinates": [
                                    121.72755,
                                    25.03858
                                        
                                    ]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": {
                                    "title": ["1922", "1924"],
                                    "content": `<h2>平溪煤礦 (石底三坑)<br> <h2> 1918年：日本人浦田彥次郎開浦田坑,屬臺陽在平溪最早的礦場。<br> 
                                                1921年：新增事件。`,
                                    "icon": minePin
                                },
                                "geometry": {
                                    "type": "Point",
                                    "coordinates": [
                                    121.72755,
                                    25.03858
                                        
                                    ]
                                }
                            },
                            //平溪煤礦結束
                            //嶺腳開始
                            {
                                "type": "Feature",
                                "properties": {
                                    "title": ["1918","1924"],
                                    "content": "<h1>嶺腳(嶺腳寮)<h1>",
                                    "icon": trainPin
                                },
                                "geometry": {
                                    "type": "Point",
                                    "coordinates": [
                                    121.7481,
                                    25.0301
                                        
                                    ]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": {
                                    "title": ["1918","1924"],
                                    "content": "<h2>大華煤礦<br> 1918年：設立礦權。<h2>",
                                    "icon": minePin
                                },
                                "geometry": {
                                    "type": "Point",
                                    "coordinates": [
                                    121.80017,
                                    25.04641, 
                                        1
                                    ]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": {
                                    "title": ["1918","1924"],
                                    "content": "<h2>三貂嶺車站<br><h2>",
                                    "icon": trainPin
                                },
                                "geometry": {
                                    "type": "Point",
                                    "coordinates": [
                                     121.82263,
                                     25.06554,
                                        1
                                    ]
                                }
                            },
                            {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.72755,
                25.03858
            ]
        },
        "properties": {
            "title": [
                "1918",
                "1918"
            ],
            "content": "<h2> \u5e73\u6eaa\u7164\u7926 \uff08\u77f3\u5e95\u4e09\u5751\uff09 <h2> 1918\u5e74\uff1a\u65e5\u672c\u4eba\u6d66\u7530\u5f65\u6b21\u90ce\u958b\u6d66\u7530\u5751,\u5c6c\u81fa\u967d\u5728\u5e73\u6eaa\u6700\u65e9\u7684\u7926\u5834\u3002",
            "icon": eventPin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.72755,
                25.03858
            ]
        },
        "properties": {
            "title": [
                "1919",
                "1938"
            ],
            "content": "<h2> \u5e73\u6eaa\u7164\u7926 \uff08\u77f3\u5e95\u4e09\u5751\uff09 <h2> 1918\u5e74\uff1a\u65e5\u672c\u4eba\u6d66\u7530\u5f65\u6b21\u90ce\u958b\u6d66\u7530\u5751,\u5c6c\u81fa\u967d\u5728\u5e73\u6eaa\u6700\u65e9\u7684\u7926\u5834\u3002",
            "icon": minePin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.72755,
                25.03858
            ]
        },
        "properties": {
            "title": [
                "1939",
                "1939"
            ],
            "content": "<h2> \u5e73\u6eaa\u7164\u7926 \uff08\u77f3\u5e95\u4e09\u5751\uff09 <h2> 1918\u5e74\uff1a\u65e5\u672c\u4eba\u6d66\u7530\u5f65\u6b21\u90ce\u958b\u6d66\u7530\u5751,\u5c6c\u81fa\u967d\u5728\u5e73\u6eaa\u6700\u65e9\u7684\u7926\u5834\u3002 <br>  1939\u5e74\uff1a\u5728\u77f3\u5e95\u5927\u659c\u5751\u958b\u901a\u7522\u7164\u63a1\u96c6\u4e2d\u904b\u9001\u51fa\u5751\u5f8c,\u66fe\u4e00\u5ea6\u505c\u63a1\u505a\u70ba\u5927\u659c\u5751\u6392\u6c34\u5751,\u53e6\u4e5f\u4f5c\u6392\u6c23\u5751\u53ca\u901a\u884c\u7528\u5751\u9053\u3002 ",
            "icon": eventPin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.72755,
                25.03858
            ]
        },
        "properties": {
            "title": [
                "1940",
                "1945"
            ],
            "content": "<h2> \u5e73\u6eaa\u7164\u7926 \uff08\u77f3\u5e95\u4e09\u5751\uff09 <h2> 1918\u5e74\uff1a\u65e5\u672c\u4eba\u6d66\u7530\u5f65\u6b21\u90ce\u958b\u6d66\u7530\u5751,\u5c6c\u81fa\u967d\u5728\u5e73\u6eaa\u6700\u65e9\u7684\u7926\u5834\u3002 <br>  1939\u5e74\uff1a\u5728\u77f3\u5e95\u5927\u659c\u5751\u958b\u901a\u7522\u7164\u63a1\u96c6\u4e2d\u904b\u9001\u51fa\u5751\u5f8c,\u66fe\u4e00\u5ea6\u505c\u63a1\u505a\u70ba\u5927\u659c\u5751\u6392\u6c34\u5751,\u53e6\u4e5f\u4f5c\u6392\u6c23\u5751\u53ca\u901a\u884c\u7528\u5751\u9053\u3002 ",
            "icon": minePin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.72755,
                25.03858
            ]
        },
        "properties": {
            "title": [
                "1946",
                "1946"
            ],
            "content": "<h2> \u5e73\u6eaa\u7164\u7926 \uff08\u77f3\u5e95\u4e09\u5751\uff09 <h2> 1918\u5e74\uff1a\u65e5\u672c\u4eba\u6d66\u7530\u5f65\u6b21\u90ce\u958b\u6d66\u7530\u5751,\u5c6c\u81fa\u967d\u5728\u5e73\u6eaa\u6700\u65e9\u7684\u7926\u5834\u3002 <br>  1939\u5e74\uff1a\u5728\u77f3\u5e95\u5927\u659c\u5751\u958b\u901a\u7522\u7164\u63a1\u96c6\u4e2d\u904b\u9001\u51fa\u5751\u5f8c,\u66fe\u4e00\u5ea6\u505c\u63a1\u505a\u70ba\u5927\u659c\u5751\u6392\u6c34\u5751,\u53e6\u4e5f\u4f5c\u6392\u6c23\u5751\u53ca\u901a\u884c\u7528\u5751\u9053\u3002 <br> 1946\u5e74\uff1a\u91cd\u65b0\u958b\u63a1\u3002",
            "icon": eventPin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.72755,
                25.03858
            ]
        },
        "properties": {
            "title": [
                "1947",
                "1971"
            ],
            "content": "<h2> \u5e73\u6eaa\u7164\u7926 \uff08\u77f3\u5e95\u4e09\u5751\uff09 <h2> 1918\u5e74\uff1a\u65e5\u672c\u4eba\u6d66\u7530\u5f65\u6b21\u90ce\u958b\u6d66\u7530\u5751,\u5c6c\u81fa\u967d\u5728\u5e73\u6eaa\u6700\u65e9\u7684\u7926\u5834\u3002 <br>  1939\u5e74\uff1a\u5728\u77f3\u5e95\u5927\u659c\u5751\u958b\u901a\u7522\u7164\u63a1\u96c6\u4e2d\u904b\u9001\u51fa\u5751\u5f8c,\u66fe\u4e00\u5ea6\u505c\u63a1\u505a\u70ba\u5927\u659c\u5751\u6392\u6c34\u5751,\u53e6\u4e5f\u4f5c\u6392\u6c23\u5751\u53ca\u901a\u884c\u7528\u5751\u9053\u3002 <br> 1946\u5e74\uff1a\u91cd\u65b0\u958b\u63a1\u3002",
            "icon": minePin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.72755,
                25.03858
            ]
        },
        "properties": {
            "title": [
                "1972",
                "1972"
            ],
            "content": "<h2> \u5e73\u6eaa\u7164\u7926 \uff08\u77f3\u5e95\u4e09\u5751\uff09 <h2> 1918\u5e74\uff1a\u65e5\u672c\u4eba\u6d66\u7530\u5f65\u6b21\u90ce\u958b\u6d66\u7530\u5751,\u5c6c\u81fa\u967d\u5728\u5e73\u6eaa\u6700\u65e9\u7684\u7926\u5834\u3002 <br>  1939\u5e74\uff1a\u5728\u77f3\u5e95\u5927\u659c\u5751\u958b\u901a\u7522\u7164\u63a1\u96c6\u4e2d\u904b\u9001\u51fa\u5751\u5f8c,\u66fe\u4e00\u5ea6\u505c\u63a1\u505a\u70ba\u5927\u659c\u5751\u6392\u6c34\u5751,\u53e6\u4e5f\u4f5c\u6392\u6c23\u5751\u53ca\u901a\u884c\u7528\u5751\u9053\u3002 <br> 1946\u5e74\uff1a\u91cd\u65b0\u958b\u63a1 \u3002<br> 1972\u5e74\uff1a\u7d50\u675f\u71df\u904b\u3002",
            "icon": eventPin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.72755,
                25.03858
            ]
        },
        "properties": {
            "title": [
                "1973",
                "1985"
            ],
            "content": "<h2> \u5e73\u6eaa\u7164\u7926 \uff08\u77f3\u5e95\u4e09\u5751\uff09 <h2> 1918\u5e74\uff1a\u65e5\u672c\u4eba\u6d66\u7530\u5f65\u6b21\u90ce\u958b\u6d66\u7530\u5751,\u5c6c\u81fa\u967d\u5728\u5e73\u6eaa\u6700\u65e9\u7684\u7926\u5834\u3002 <br>  1939\u5e74\uff1a\u5728\u77f3\u5e95\u5927\u659c\u5751\u958b\u901a\u7522\u7164\u63a1\u96c6\u4e2d\u904b\u9001\u51fa\u5751\u5f8c,\u66fe\u4e00\u5ea6\u505c\u63a1\u505a\u70ba\u5927\u659c\u5751\u6392\u6c34\u5751,\u53e6\u4e5f\u4f5c\u6392\u6c23\u5751\u53ca\u901a\u884c\u7528\u5751\u9053\u3002 <br> <p>1946\u5e74\uff1a\u91cd\u65b0\u958b\u63a1 \u3002<p> <p>1972\u5e74\uff1a\u7d50\u675f\u71df\u904b\u3002<p>",
            "icon": minePin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.72755,
                25.03858
            ]
        },
        "properties": {
            "title": [
                "1987",
                "1987"
            ],
            "content": "<h2> \u5e73\u6eaa\u7164\u7926 \uff08\u77f3\u5e95\u4e09\u5751\uff09 <h2> 1918\u5e74\uff1a\u65e5\u672c\u4eba\u6d66\u7530\u5f65\u6b21\u90ce\u958b\u6d66\u7530\u5751,\u5c6c\u81fa\u967d\u5728\u5e73\u6eaa\u6700\u65e9\u7684\u7926\u5834\u3002 <br>  1939\u5e74\uff1a\u5728\u77f3\u5e95\u5927\u659c\u5751\u958b\u901a\u7522\u7164\u63a1\u96c6\u4e2d\u904b\u9001\u51fa\u5751\u5f8c,\u66fe\u4e00\u5ea6\u505c\u63a1\u505a\u70ba\u5927\u659c\u5751\u6392\u6c34\u5751,\u53e6\u4e5f\u4f5c\u6392\u6c23\u5751\u53ca\u901a\u884c\u7528\u5751\u9053\u3002 <br> 1946\u5e74\uff1a\u91cd\u65b0\u958b\u63a1 \u3002<br> 1972\u5e74\uff1a\u7d50\u675f\u71df\u904b\u3002 <br> 1987\u5e74\uff1a\u5c01\u5751\u3002",
            "icon": eventPin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.72755,
                25.03858
            ]
        },
        "properties": {
            "title": [
                "1988",
                "2019"
            ],
            "content": "<h2> \u5e73\u6eaa\u7164\u7926 \uff08\u77f3\u5e95\u4e09\u5751\uff09 <h2> 1918\u5e74\uff1a\u65e5\u672c\u4eba\u6d66\u7530\u5f65\u6b21\u90ce\u958b\u6d66\u7530\u5751,\u5c6c\u81fa\u967d\u5728\u5e73\u6eaa\u6700\u65e9\u7684\u7926\u5834\u3002 <br>  1939\u5e74\uff1a\u5728\u77f3\u5e95\u5927\u659c\u5751\u958b\u901a\u7522\u7164\u63a1\u96c6\u4e2d\u904b\u9001\u51fa\u5751\u5f8c,\u66fe\u4e00\u5ea6\u505c\u63a1\u505a\u70ba\u5927\u659c\u5751\u6392\u6c34\u5751,\u53e6\u4e5f\u4f5c\u6392\u6c23\u5751\u53ca\u901a\u884c\u7528\u5751\u9053\u3002 <br> 1946\u5e74\uff1a\u91cd\u65b0\u958b\u63a1 \u3002<br> 1972\u5e74\uff1a\u7d50\u675f\u71df\u904b\u3002 <br> 1987\u5e74\uff1a\u5c01\u5751\u3002",
            "icon": normalPin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.72108,
                25.02038
            ]
        },
        "properties": {
            "title": [
                "1955",
                "1955"
            ],
            "content": "<h2>\u9752\u6850\u7164\u7926\uff08\u77f3\u5e95\u65b0\u5751\uff09 <h2> 1955\u5e74\uff1a\u63a5\u53d7\u7f8e\u63f4\u8cb8\u6b3e\u5354\u52a9\u958b\u5751,\u539f\u7a31\u767d\u77f3\u8173\u7164\u7926\u3001\u77f3\u5e95\u65b0\u5751\u3002",
            "icon": eventPin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.72108,
                25.02038
            ]
        },
        "properties": {
            "title": [
                "1956",
                "1956"
            ],
            "content": "<h2>\u9752\u6850\u7164\u7926\uff08\u77f3\u5e95\u65b0\u5751\uff09 <h2> 1955\u5e74\uff1a\u63a5\u53d7\u7f8e\u63f4\u8cb8\u6b3e\u5354\u52a9\u958b\u5751,\u539f\u7a31\u767d\u77f3\u8173\u7164\u7926\u3001\u77f3\u5e95\u65b0\u5751\u3002",
            "icon": minePin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.72108,
                25.02038
            ]
        },
        "properties": {
            "title": [
                "1957",
                "1957"
            ],
            "content": "<h2>\u9752\u6850\u7164\u7926\uff08\u77f3\u5e95\u65b0\u5751\uff09 <h2> 1955\u5e74\uff1a\u63a5\u53d7\u7f8e\u63f4\u8cb8\u6b3e\u5354\u52a9\u958b\u5751,\u539f\u7a31\u767d\u77f3\u8173\u7164\u7926\u3001\u77f3\u5e95\u65b0\u5751\u3002 <br> 1957\u5e74\uff1a\u6539\u7a31\u9752\u6850\u7164\u7926\uff0c\u958b\u59cb\u751f\u7522\u3002",
            "icon": eventPin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.72108,
                25.02038
            ]
        },
        "properties": {
            "title": [
                "1958",
                "1971"
            ],
            "content": "<h2>\u9752\u6850\u7164\u7926\uff08\u77f3\u5e95\u65b0\u5751\uff09 <h2> 1955\u5e74\uff1a\u63a5\u53d7\u7f8e\u63f4\u8cb8\u6b3e\u5354\u52a9\u958b\u5751,\u539f\u7a31\u767d\u77f3\u8173\u7164\u7926\u3001\u77f3\u5e95\u65b0\u5751\u3002 <br> 1957\u5e74\uff1a\u6539\u7a31\u9752\u6850\u7164\u7926\uff0c\u958b\u59cb\u751f\u7522\u3002",
            "icon": minePin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.72108,
                25.02038
            ]
        },
        "properties": {
            "title": [
                "1972",
                "1972"
            ],
            "content": "<h2>\u9752\u6850\u7164\u7926\uff08\u77f3\u5e95\u65b0\u5751\uff09 <h2> 1955\u5e74\uff1a\u63a5\u53d7\u7f8e\u63f4\u8cb8\u6b3e\u5354\u52a9\u958b\u5751,\u539f\u7a31\u767d\u77f3\u8173\u7164\u7926\u3001\u77f3\u5e95\u65b0\u5751\u3002 <br> 1957\u5e74\uff1a\u6539\u7a31\u9752\u6850\u7164\u7926\uff0c\u958b\u59cb\u751f\u7522\u3002<br> 1972\u5e74\uff1a\u751f\u7522\u4f75\u5165\u77f3\u5e95\u7164\u7926\u3002",
            "icon": eventPin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.72108,
                25.02038
            ]
        },
        "properties": {
            "title": [
                "1973",
                "2019"
            ],
            "content": "<h2>\u9752\u6850\u7164\u7926\uff08\u77f3\u5e95\u65b0\u5751\uff09 <h2> 1955\u5e74\uff1a\u63a5\u53d7\u7f8e\u63f4\u8cb8\u6b3e\u5354\u52a9\u958b\u5751,\u539f\u7a31\u767d\u77f3\u8173\u7164\u7926\u3001\u77f3\u5e95\u65b0\u5751\u3002 <br> 1957\u5e74\uff1a\u6539\u7a31\u9752\u6850\u7164\u7926\uff0c\u958b\u59cb\u751f\u7522\u3002<br> 1972\u5e74\uff1a\u751f\u7522\u4f75\u5165\u77f3\u5e95\u7164\u7926\u3002",
            "icon": minePin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.81183,
                25.05542
            ]
        },
        "properties": {
            "title": [
                "1947",
                "1947"
            ],
            "content": "<h2> \u78a9\u4ec1\u7164\u7926 <h2> 1947\u5e74\uff1a\u7531\u5ed6\u5317\u6a1e\u958b\u63a1\u3002",
            "icon": eventPin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.81183,
                25.05542
            ]
        },
        "properties": {
            "title": [
                "1948",
                "1952"
            ],
            "content": "<h2> \u78a9\u4ec1\u7164\u7926 <h2> 1947\u5e74\uff1a\u7531\u5ed6\u5317\u6a1e\u958b\u63a1\u3002",
            "icon": minePin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.81183,
                25.05542
            ]
        },
        "properties": {
            "title": [
                "1953",
                "1953"
            ],
            "content": "<h2> \u78a9\u4ec1\u7164\u7926 <h2> 1947\u5e74\uff1a\u7531\u5ed6\u5317\u6a1e\u958b\u63a1\u3002<br> 1953\u5e74\uff1a1953\u5e74\u81fa\u967d\u6536\u56de\u76f4\u71df\u4e26\u8207\u5ed6\u5317\u6a1e\u5408\u8fa6\u3002",
            "icon": eventPin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.81183,
                25.05542
            ]
        },
        "properties": {
            "title": [
                "1954",
                "1968"
            ],
            "content": "<h2> \u78a9\u4ec1\u7164\u7926 <h2> 1947\u5e74\uff1a\u7531\u5ed6\u5317\u6a1e\u958b\u63a1\u3002<br> 1953\u5e74\uff1a1953\u5e74\u81fa\u967d\u6536\u56de\u76f4\u71df\u4e26\u8207\u5ed6\u5317\u6a1e\u5408\u8fa6\u3002",
            "icon": minePin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.81183,
                25.05542
            ]
        },
        "properties": {
            "title": [
                "1969",
                "1969"
            ],
            "content": "<h2> \u78a9\u4ec1\u7164\u7926 <h2> 1947\u5e74\uff1a\u7531\u5ed6\u5317\u6a1e\u958b\u63a1\u3002<br> 1953\u5e74\uff1a1953\u5e74\u81fa\u967d\u6536\u56de\u76f4\u71df\u4e26\u8207\u5ed6\u5317\u6a1e\u5408\u8fa6\u3002<br> 1969\u5e74\uff1a\u6536\u5751,\u7e3d\u7522\u91cf\u70ba358,843\u516c\u5678\u3002",
            "icon": eventPin
        }
    },
    {
        "type": "Feature",
        "geometry": {
            "type": "Point",
            "coordinates": [
                121.81183,
                25.05542
            ]
        },
        "properties": {
            "title": [
                "1970",
                "2019"
            ],
            "content": "<h2> \u78a9\u4ec1\u7164\u7926 <h2> 1947\u5e74\uff1a\u7531\u5ed6\u5317\u6a1e\u958b\u63a1\u3002<br> 1953\u5e74\uff1a1953\u5e74\u81fa\u967d\u6536\u56de\u76f4\u71df\u4e26\u8207\u5ed6\u5317\u6a1e\u5408\u8fa6\u3002<br> 1969\u5e74\uff1a\u6536\u5751,\u7e3d\u7522\u91cf\u70ba358,843\u516c\u5678\u3002",
            "icon": normalPin
        }
    }
                            
                            
                        ]
                    }

                    fetch("./src/output.json")
                    .then(response => {
                    return response.json();
                    })
                    .then(jsondata => console.log(jsondata));
                    
            var mymap = L.map('mapid');

            

                                

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(mymap);
            
            function createMarker(feature, latlng) {
                return L.marker(latlng, {icon: bible});
            }

            getDataAddMarkers = function( {label, value, map, exclamation} ) {
                map.eachLayer(function (layer) {
                        if (layer instanceof L.Marker) {
                            map.removeLayer(layer);
                        }
                });

                filteredData = data.features.filter(function (i, n) {
                    //console.log(i.properties.title[0], i.properties.title[1],label,(parseInt(i.properties.title[0])<=parseInt(label)),parseInt(i.properties.title[1] >= parseInt(label)));
                    if( (parseInt(i.properties.title[0])<=parseInt(label)) && (parseInt(i.properties.title[1]) >= parseInt(label)) ){
                        return true;
                    } 

                     if(i.properties.title.indexOf(label) >= 0){
                        return true;
                     }
                    });
                //console.log(filteredData)
                
                /*var bible = L.Icon({
                    iconSize: [50, 50],
                    iconURL: "https://leafletjs.com/examples/geojson/baseball-marker.png"
                })*/
                var geojsonMarkerOptions = {
                                                radius: 8,
                                                fillColor: "red",
                                                color: "#000",
                                                weight: 1,
                                                opacity: 1,
                                                fillOpacity: 0.8
                                            };

                var markerArray = [];
                L.geoJson(filteredData, {
                    onEachFeature: function onEachFeature(feature, layer) {
                        content = `${feature.properties.content} <br>`
                        var popup = L.popup().setContent(content);
                        
                        layer.bindPopup(popup);
                        
                        markerArray.push(layer);
                    },
                    pointToLayer: function(feature, latlng){
                        return  L.marker(latlng, {icon: feature.properties.icon});
                    }
                }).addTo(map);
                
                var markerGroup = L.featureGroup(markerArray);
                map.fitBounds(markerGroup.getBounds());
                //map.setView([25.03461,121.7638], 12);
            };

            var timeItems = [];
            for(var i=1918; i<2020; i++){
                timeItems.push(i.toString());
            }

            L.control.timelineSlider({
                timelineItems: [1918, 1919, 1921, 1922, 1923,1926,1927,1928,1929,1935,1937,1938,1939,1940,1943,1946,1947,1948,1949,1951,1953,1954,1955,1956,1957,1958,1959,1962,1963,1965,1966,1967,1968,1969,1970,1972,1973,1975,1979,1980,1981,1985,1987,1990,1991,1992,1994,1997,1998,2000,2019], 
                changeMap: getDataAddMarkers,
                extraChangeMapParams: {exclamation: "Hello World!"},
                labelWidth: "29px",
                betweenLabelAndRangeSpace: "20px",
                labelFontSize: "4px",
                topBgPadding: "20px"})
            .addTo(mymap);             
        </script>
    </body>

</html>